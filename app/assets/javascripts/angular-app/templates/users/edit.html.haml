%h1.page-header.text-center Edit User
.row
  .col-md-4.col-md-offset-4
    .panel.panel-default
      .panel-body
        %form{name: "edit_user_form", novalidate: true}
          .form-group{'ng-class':"{'has-error': errors.email}"}
            %label{name: 'email', class: 'control-label'} Email
            %input{type: 'text', name: 'email', 'ng-model': 'user.email', class: 'form-control', 'ng-required':'true'}
            .help-block.text-danger{'ng-show':'errors.email'} {{ errors.email.join(', ') }}
          .form-group{'ng-class':"{'has-error': errors.email}",'ng-show':"current_user.role == 'admin'"}
            %label{name: 'email', class: 'control-label'} Role
            %select{name: 'role', 'ng-model': 'user.role', class: 'form-control', 'ng-options': 'option.value as option.label for option in roles'}
            .help-block.text-danger{'ng-show':'errors.role'} {{ errors.role.join(', ') }}
          .form-group{'ng-class':"{'has-error': errors.num_of_calories}"}
            %label{name: 'num_of_calories', class: 'control-label'} Expected number of calories per day
            %input{type: 'num_of_calories', name: 'num_of_calories', 'ng-model': 'user.num_of_calories', class: 'form-control', 'ng-required':'true'}
            .help-block.text-danger{'ng-show':'errors.num_of_calories'} {{ errors.num_of_calories.join(', ') }}
          %input{type: 'submit', value: 'Update', class: 'btn btn-primary', 'ng-click':'update()', 'ng-disabled':'busy'}
          %a{class: 'btn btn-primary', 'href':'/#/users', 'ng-disabled':'busy'} Cancel
